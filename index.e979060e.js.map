{"mappings":"AAIA,MAAMA,EAAO,CACXC,OAAQC,SAASC,eAAe,eAChCC,SAAUF,SAASG,cAAc,QACjCC,MAAOJ,SAASG,cAAc,YAC9BE,MAAOL,SAASG,cAAc,cAG1BG,EAAU,CACdC,aAAa,GAETC,EAAW,IAAIC,aACfC,EAAiB,IAAIC,YAAY,cAAc,GAwBrD,SAASC,IACP,MAAQC,OAAQC,GACdhB,EAAKM,MAAMW,kBAAkBC,wBAE/BC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,U,CAId,SAASC,IACP,OAAIb,EAASc,KAAO,GAAKd,EAASc,KAAOC,KAAKC,KAAKhB,EAASiB,UAAY,KACtEf,EAAegB,UACfd,IACOe,SAASC,OAAOC,QACrB,gEAIJnB,EAAeoB,UAIjBC,iBACE,IACE,MAAMC,QAAiBxB,EAASyB,YAIhC,GAAwB,IAApBD,EAASE,OACX,MAAM,IAAIC,MAAMC,GAGlB,MAAMC,EAASL,EAASM,QACtB,CAACC,EAAQC,IAAQD,EAcvB,UAAsBE,aACpBA,EAAYC,KACZA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,EAASC,cACTA,IAEA,MAAO,8DAC0BA,mCACNN,WAAsBC,sFAGnCC,yDAGAC,4DAGGC,6DAGCC,+B,CArCYE,CAAaR,IACvC,IAEEhC,EAASc,KAAO,GAAM,GACxBK,SAASC,OAAOqB,QAAQ,oBAAoBzC,EAASiB,qBAuCrCc,EApCLF,EAqCfvC,EAAKM,MAAM8C,mBAAmB,YAAaX,GAC3C3B,IAGiB,IAAIuC,eAAe,iBAAkB7C,GAC7C8C,S,CAxCP,MAAOC,GACPjB,EAAQiB,E,CAiCZ,IAAsBd,C,CAzDbe,GAAcC,MAAK,IAAM7C,EAAe8C,W,CAoEjD,SAASpB,EAAQqB,GAGf,OAFAC,QAAQC,IAAIF,GACZ/C,EAAegB,UACRC,SAASC,OAAOgC,QACrB,2E,CAnHJ9D,EAAKC,OAAO8D,iBAAiB,UAG7B,SAAkBC,GAChBA,EAAGC,iBACH,MAAMC,EAAOF,EAAGG,cACVC,EAAQF,EAAKG,SAASC,YAAYF,MAAMG,OAC9C,GAAc,KAAVH,EACF,OAAOvC,SAASC,OAAOC,QACrB,8CAGFrB,EAAS8D,OAASJ,EAClB1D,EAAS+D,WAET7D,EAAe8D,YA8FjB1E,EAAKM,MAAMqE,UAAY,GA3FrBpD,IAAUqD,SAAQ,KAChBV,EAAKW,OAAO,G,IAlBlBjE,EAAekE,OAAOf,iBAAiB,QAASxC","sources":["src/js/index.js"],"sourcesContent":["\n\n\n\nconst refs = {\n  formEl: document.getElementById('search-form'),\n  buttonEl: document.querySelector('.btn'),\n  divEl: document.querySelector('.gallery'),\n  imgEl: document.querySelector('.img-card'),\n};\n\nconst options = {\n  showCounter: false,\n};\nconst newImage = new searchImages();\nconst newLoadMoreBtn = new loadMoreBtn('.load-more', true);\nrefs.formEl.addEventListener('submit', onSubmit);\nnewLoadMoreBtn.button.addEventListener('click', onClick);\n\nfunction onSubmit(ev) {\n  ev.preventDefault();\n  const form = ev.currentTarget;\n  const value = form.elements.searchQuery.value.trim();\n  if (value === '') {\n    return Notiflix.Notify.warning(\n      'Please enter a value to search for images!'\n    );\n  } else {\n    newImage.values = value;\n    newImage.restPage();\n\n    newLoadMoreBtn.removeBtn();\n    delitMarkup();\n\n    onClick().finally(() => {\n      form.reset();\n    });\n  }\n}\nfunction scroll() {\n  const { height: cardHeight } =\n    refs.divEl.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction onClick() {\n  if (newImage.page > 1 && newImage.page > Math.ceil(newImage.totalHits / 40)) {\n    newLoadMoreBtn.hideBtn();\n    scroll();\n    return Notiflix.Notify.warning(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  }\n\n  newLoadMoreBtn.disable();\n  return getRestPage().then(() => newLoadMoreBtn.enable());\n}\n\nasync function getRestPage() {\n  try {\n    const articles = await newImage.getImages();\n    // console.log(newImage.page)\n    // console.log(newImage.totalHits)\n    // console.log(articles);\n    if (articles.length === 0) {\n      throw new Error(onError);\n    }\n\n    const markup = articles.reduce(\n      (markup, hit) => markup + createMarkup(hit),\n      ''\n    );\n    if (newImage.page - 1 === 1) {\n      Notiflix.Notify.success(`Hooray! We found ${newImage.totalHits} images.`);\n    }\n\n    updateMarkup(markup);\n    initializeLightbox();\n  } catch (err) {\n    onError(err);\n  }\n}\n\nfunction createMarkup({\n  webformatURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n  largeImageURL,\n}) {\n  return `<div class=\"photo-card\">\n  <a class=\"gallery__link\" href='${largeImageURL}'>\n<img class=\"img-card\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/><a>\n<div class=\"info\">\n  <p class=\"info-item\">\n    <b>Likes: ${likes}</b>\n  </p>\n  <p class=\"info-item\">\n    <b>Views: ${views}</b>\n  </p>\n  <p class=\"info-item\">\n    <b>Comments: ${comments}</b>\n  </p>\n  <p class=\"info-item\">\n    <b>Downloads: ${downloads}</b>\n  </p>\n</div>\n</div>`;\n}\n\nfunction updateMarkup(markup) {\n  refs.divEl.insertAdjacentHTML('beforeend', markup);\n  scroll();\n}\nfunction initializeLightbox() {\n  const lightbox = new SimpleLightbox('.gallery__link', options);\n  lightbox.refresh();\n}\nfunction delitMarkup() {\n  refs.divEl.innerHTML = '';\n}\nfunction onError(er) {\n  console.log(er);\n  newLoadMoreBtn.hideBtn();\n  return Notiflix.Notify.failure(\n    'Sorry, there are no images matching your search query. Please try again.'\n  );\n}\n"],"names":["$85a5f86b715fe7db$var$refs","formEl","document","getElementById","buttonEl","querySelector","divEl","imgEl","$85a5f86b715fe7db$var$options","showCounter","$85a5f86b715fe7db$var$newImage","searchImages","$85a5f86b715fe7db$var$newLoadMoreBtn","loadMoreBtn","$85a5f86b715fe7db$var$scroll","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$85a5f86b715fe7db$var$onClick","page","Math","ceil","totalHits","hideBtn","Notiflix","Notify","warning","disable","async","articles","getImages","length","Error","$85a5f86b715fe7db$var$onError","markup1","reduce","markup","hit","webformatURL","tags","likes","views","comments","downloads","largeImageURL","$85a5f86b715fe7db$var$createMarkup","success","insertAdjacentHTML","SimpleLightbox","refresh","err","$85a5f86b715fe7db$var$getRestPage","then","enable","er","console","log","failure","addEventListener","ev","preventDefault","form","currentTarget","value","elements","searchQuery","trim","values","restPage","removeBtn","innerHTML","finally","reset","button"],"version":3,"file":"index.e979060e.js.map"}